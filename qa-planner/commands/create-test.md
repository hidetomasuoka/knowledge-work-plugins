---
description: GitHub PR URL からテスト設計書を生成する
argument-hint: "<GitHub PR URL>"
---

# Create Test

> GitHub が接続されていない場合は [CONNECTORS.md](../CONNECTORS.md) を確認してください。

GitHub PR の diff・コメント・変更ファイル一覧を取得し、テスト設計書を生成して Markdown ファイルに保存します。

## ワークフロー

### 1. PR URL の受け取り

引数として PR URL が渡された場合はそのまま使用する。渡されていない場合は以下のように確認する：

```
テスト設計書を作成したい PR の URL を貼り付けてください。
例: https://github.com/myorg/backend/pull/88
```

### 2. PR 情報の取得

~~github を使って以下を取得する：

- PR タイトル・説明・作成者・作成日
- 変更ファイル一覧（パス・追加/変更/削除の区分）
- diff（主要な変更箇所）
- PR コメント・レビューコメント
- リポジトリ名・PR 番号

### 3. 変更内容の分析

取得した情報をもとに以下を分析する。**qa-knowledge** スキルと `knowledge/` 配下のファイルを参照すること。

**変更の分類：**
- API 変更（エンドポイント追加・変更・削除）
- データモデル変更（DB スキーマ・DTO・バリデーション）
- ビジネスロジック変更（計算・条件分岐・ステートマシン）
- 認証・認可変更
- インフラ・設定変更（環境変数・キャッシュ・キュー）
- UI/UX 変更
- 共通ミドルウェア・ライブラリ変更

**波及リスクの判定：**
- `knowledge/service-dependency.md` でサービス間の依存を確認
- `knowledge/user-flows.md` で影響するユーザーフローを特定
- `knowledge/incident-history.md` で過去の類似インシデントを参照
- `knowledge/environment-config.md` で環境差異リスクを確認

### 4. テスト範囲の分類

各テスト項目を以下の3段階で分類する：

- ✅ **必須テスト** — 変更に直接関係する機能。必ず確認が必要。
- 🔶 **推奨テスト** — 波及リスクのある既存機能。時間があれば確認。
- ⬜ **スキップ可** — 影響なしと判断できる機能。

### 5. テスト設計書の生成

**test-output-format** スキルのテンプレートに従ってテスト設計書を生成する。

### 6. ファイルへの保存

以下のパスに Markdown ファイルとして保存する：

```
{作業フォルダ}/{リポジトリ名}/PR-{番号}/YYYYMMDD_テスト設計_PR{番号}.md
```

例：`./backend/PR-88/20260221_テスト設計_PR88.md`

保存後、以下を報告する：
- 保存先パス
- テスト項目数（必須 / 推奨 / スキップ可の件数）
- 特に注意が必要なリスクポイント（あれば）

## 注意事項

- diff が大きすぎて一度に取得できない場合は、変更ファイル一覧と PR 説明を優先する
- ~~github が接続されていない場合はエラーを表示し、接続方法を案内する
- テストデータには本番データを使用しないよう記載すること
